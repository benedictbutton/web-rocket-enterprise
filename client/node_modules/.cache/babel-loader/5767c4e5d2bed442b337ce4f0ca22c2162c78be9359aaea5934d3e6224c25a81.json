{"ast":null,"code":"import { Component, createElement, createRef } from \"react\";\nimport PropTypes from \"prop-types\";\nconst EVENTS = [\"onChange\", \"onConsoleOpen\", \"onConsoleClose\", \"getInstance\", \"getJsCode\", \"onRun\", \"onError\", \"callback\"];\nconst DATA_ATTRS = [\"version\", \"targetPlatform\", \"highlightOnly\", \"jsLibs\", \"minCompilerVersion\", \"autocomplete\", \"outputHeight\", \"trackRunId\", \"crosslink\"];\nfunction upper2dash(str) {\n  return str.replace(/[A-Z]/g, \"-$&\").toLowerCase();\n}\nfunction normalizeAttribute(name) {\n  let attr = name;\n  if (DATA_ATTRS.indexOf(name) !== -1) attr = \"data-\" + attr;\n  return upper2dash(attr);\n}\nconst eventsPropTypes = EVENTS.reduce((types, name) => {\n  types[name] = PropTypes.func;\n  return types;\n}, {});\nclass ReactKotlinPlayground extends Component {\n  constructor(props, ...args) {\n    super(props, ...args);\n    this.code = /*#__PURE__*/createRef();\n    this.state = {\n      kotlinInstance: null\n    };\n    EVENTS.forEach(event => {\n      if (!this[event]) this[event] = this.createProxy(event);\n    });\n    // this.handleChange = this.handleChange.bind(this);\n    this.handleInstance = this.handleInstance.bind(this);\n  }\n  createProxy(name) {\n    return (...args) => {\n      if (this.props[name]) this.props[name](...args);\n    };\n  }\n  handleInstance(instance) {\n    instance.state.code = 'zyx';\n    console.log('instance: ', instance);\n    // this.setState({kotlinInstance: instance})\n  }\n\n  // handleChange(code) {\n  //     console.log('pokey: ', code);\n  //     var editor = this.state.kotlinInstance.codemirror.getTextArea(this.code.current);\n  //     console.log(editor);\n  // editor.getDoc().setValue('var msg = \"Hi\";');\n  // }\n\n  initPlayground() {\n    const isInited = this.code && this.code.current && this.code.current.getAttribute(\"data-kotlin-playground-initialized\") === \"true\";\n    if (!isInited && this.props.playground) {\n      const eventFunctions = EVENTS.reduce((events, name) => {\n        events[name] = this[name] || this.props[name];\n        return events;\n      }, {});\n      // eventFunctions[\"onChange\"] = this.handleChange;\n      // eventFunctions[\"getInstance\"] = this.handleInstance;\n      eventFunctions[\"getInstance\"] = this.handleInstance;\n      this.props.playground(this.code.current, eventFunctions);\n    }\n  }\n  componentDidMount() {\n    this.initPlayground();\n  }\n  componentDidUpdate() {\n    console.log('pokemons state has changed.');\n    this.initPlayground();\n  }\n  render() {\n    const {\n      className,\n      children,\n      //eslint-disable-next-line no-unused-vars\n      playground: _playground,\n      ...props\n    } = this.props;\n    console.log(this.props);\n\n    // console.log('kotlineInstance: ', this.state.kotlinInstance.getCode());\n\n    const elementProps = Object.keys(props).reduce((result, name) => {\n      if (EVENTS.indexOf(name) === -1) result[normalizeAttribute(name)] = props[name];\n      return result;\n    }, {});\n    return /*#__PURE__*/createElement(\"div\", {\n      className\n    }, /*#__PURE__*/createElement(\"code\", {\n      ...elementProps,\n      ref: this.code\n    }, children));\n  }\n}\nfunction cloneProps(props) {\n  const clonedProps = {\n    ...props\n  };\n  Object.keys(props).forEach(name => {\n    clonedProps[normalizeAttribute(name)] = props[name];\n  });\n  return clonedProps;\n}\n\n// ReactKotlinPlayground.propTypes = {\n//     className: PropTypes.string,\n//     children: PropTypes.node.required,\n//     playground: PropTypes.func.required,\n\n//     ...eventsPropTypes,\n\n//     ...cloneProps({\n//         version: PropTypes.string,\n//         args: PropTypes.oneOfType([\n//             PropTypes.string,\n//             PropTypes.arrayOf(PropTypes.string),\n//         ]),\n//         targetPlatform: PropTypes.oneOf([\"junit\", \"canvas\", \"js\", \"java\"]),\n//         highlightOnly: PropTypes.oneOf([\"nocursor\"]),\n//         jsLibs: PropTypes.string,\n//         autoIndent: PropTypes.bool,\n//         theme: PropTypes.string,\n//         mode: PropTypes.oneOf([\n//             \"kotlin\",\n//             \"js\",\n//             \"java\",\n//             \"groovy\",\n//             \"xml\",\n//             \"c\",\n//             \"shell\",\n//             \"swift\",\n//             \"obj-c\",\n//         ]),\n//         minCompilerVersion: PropTypes.string,\n//         autocomplete: PropTypes.bool,\n//         highlightOnFly: PropTypes.bool,\n//         indent: PropTypes.number,\n//         lines: PropTypes.bool,\n//         from: PropTypes.number,\n//         to: PropTypes.number,\n//         outputHeight: PropTypes.number,\n//         matchBrackets: PropTypes.bool,\n//     }),\n// };\n\nexport default ReactKotlinPlayground;","map":{"version":3,"names":["Component","createElement","createRef","PropTypes","EVENTS","DATA_ATTRS","upper2dash","str","replace","toLowerCase","normalizeAttribute","name","attr","indexOf","eventsPropTypes","reduce","types","func","ReactKotlinPlayground","constructor","props","args","code","state","kotlinInstance","forEach","event","createProxy","handleInstance","bind","instance","console","log","initPlayground","isInited","current","getAttribute","playground","eventFunctions","events","componentDidMount","componentDidUpdate","render","className","children","_playground","elementProps","Object","keys","result","ref","cloneProps","clonedProps"],"sources":["/Users/benedict.daly/Apps/react-node-websockets-demo/client/src/KotlinComponent.js"],"sourcesContent":["import { Component, createElement, createRef } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst EVENTS = [\n    \"onChange\",\n    \"onConsoleOpen\",\n    \"onConsoleClose\",\n    \"getInstance\",\n    \"getJsCode\",\n    \"onRun\",\n    \"onError\",\n    \"callback\"\n];\n\nconst DATA_ATTRS = [\n    \"version\",\n    \"targetPlatform\",\n    \"highlightOnly\",\n    \"jsLibs\",\n    \"minCompilerVersion\",\n    \"autocomplete\",\n    \"outputHeight\",\n    \"trackRunId\",\n    \"crosslink\",\n];\n\nfunction upper2dash(str) {\n    return str.replace(/[A-Z]/g, \"-$&\").toLowerCase();\n}\n\nfunction normalizeAttribute(name) {\n    let attr = name;\n    if (DATA_ATTRS.indexOf(name) !== -1) attr = \"data-\" + attr;\n    return upper2dash(attr);\n}\n\nconst eventsPropTypes = EVENTS.reduce((types, name) => {\n    types[name] = PropTypes.func;\n    return types;\n}, {});\n\nclass ReactKotlinPlayground extends Component {\n    constructor(props, ...args) {\n        super(props, ...args);\n\n        this.code = createRef();\n\n        this.state = {kotlinInstance: null}\n\n        EVENTS.forEach((event) => {\n            if (!this[event]) this[event] = this.createProxy(event);\n        });\n        // this.handleChange = this.handleChange.bind(this);\n        this.handleInstance = this.handleInstance.bind(this);\n    }\n\n    createProxy(name) {\n        return (...args) => {\n            if (this.props[name]) this.props[name](...args);\n        };\n    }\n\n    handleInstance(instance) {\n        instance.state.code = 'zyx';\n        console.log('instance: ', instance);\n        // this.setState({kotlinInstance: instance})\n    }\n\n    // handleChange(code) {\n    //     console.log('pokey: ', code);\n    //     var editor = this.state.kotlinInstance.codemirror.getTextArea(this.code.current);\n    //     console.log(editor);\n        // editor.getDoc().setValue('var msg = \"Hi\";');\n    // }\n\n    initPlayground() {\n        const isInited =\n            this.code &&\n            this.code.current &&\n            this.code.current.getAttribute(\n                \"data-kotlin-playground-initialized\"\n            ) === \"true\";        \n\n        if (!isInited && this.props.playground) {\n            const eventFunctions = EVENTS.reduce((events, name) => {\n                events[name] = this[name] || this.props[name];\n                return events;\n            }, {});\n            // eventFunctions[\"onChange\"] = this.handleChange;\n            // eventFunctions[\"getInstance\"] = this.handleInstance;\n            eventFunctions[\"getInstance\"] = this.handleInstance;\n \n            this.props.playground(this.code.current, eventFunctions);\n        }\n    }\n\n    componentDidMount() {\n        this.initPlayground();\n    }\n\n    componentDidUpdate() {\n        console.log('pokemons state has changed.');\n        this.initPlayground();\n  }\n\n    render() {\n        const {\n            className,\n            children,\n            //eslint-disable-next-line no-unused-vars\n            playground: _playground,\n            ...props\n        } = this.props;\n\n        console.log(this.props);\n\n        // console.log('kotlineInstance: ', this.state.kotlinInstance.getCode());\n\n        const elementProps = Object.keys(props).reduce((result, name) => {\n            if (EVENTS.indexOf(name) === -1)\n                result[normalizeAttribute(name)] = props[name];\n            return result;\n        }, {});\n\n        return createElement(\n            \"div\",\n            { className },\n            createElement(\"code\", { ...elementProps, ref: this.code }, children)\n        );\n    }\n}\n\nfunction cloneProps(props) {\n    const clonedProps = { ...props };\n\n    Object.keys(props).forEach((name) => {\n        clonedProps[normalizeAttribute(name)] = props[name];\n    });\n\n    return clonedProps;\n}\n\n// ReactKotlinPlayground.propTypes = {\n//     className: PropTypes.string,\n//     children: PropTypes.node.required,\n//     playground: PropTypes.func.required,\n\n//     ...eventsPropTypes,\n\n//     ...cloneProps({\n//         version: PropTypes.string,\n//         args: PropTypes.oneOfType([\n//             PropTypes.string,\n//             PropTypes.arrayOf(PropTypes.string),\n//         ]),\n//         targetPlatform: PropTypes.oneOf([\"junit\", \"canvas\", \"js\", \"java\"]),\n//         highlightOnly: PropTypes.oneOf([\"nocursor\"]),\n//         jsLibs: PropTypes.string,\n//         autoIndent: PropTypes.bool,\n//         theme: PropTypes.string,\n//         mode: PropTypes.oneOf([\n//             \"kotlin\",\n//             \"js\",\n//             \"java\",\n//             \"groovy\",\n//             \"xml\",\n//             \"c\",\n//             \"shell\",\n//             \"swift\",\n//             \"obj-c\",\n//         ]),\n//         minCompilerVersion: PropTypes.string,\n//         autocomplete: PropTypes.bool,\n//         highlightOnFly: PropTypes.bool,\n//         indent: PropTypes.number,\n//         lines: PropTypes.bool,\n//         from: PropTypes.number,\n//         to: PropTypes.number,\n//         outputHeight: PropTypes.number,\n//         matchBrackets: PropTypes.bool,\n//     }),\n// };\n\nexport default ReactKotlinPlayground;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}