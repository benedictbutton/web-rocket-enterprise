{"ast":null,"code":"import { Component, createElement, createRef } from \"react\";\nimport PropTypes from \"prop-types\";\nconst EVENTS = [\"onChange\", \"onConsoleOpen\", \"onConsoleClose\", \"getInstance\", \"getJsCode\", \"onRun\", \"onError\"];\nconst DATA_ATTRS = [\"version\", \"targetPlatform\", \"highlightOnly\", \"jsLibs\", \"minCompilerVersion\", \"autocomplete\", \"outputHeight\", \"trackRunId\", \"crosslink\"];\nfunction upper2dash(str) {\n  return str.replace(/[A-Z]/g, \"-$&\").toLowerCase();\n}\nfunction normalizeAttribute(name) {\n  let attr = name;\n  if (DATA_ATTRS.indexOf(name) !== -1) attr = \"data-\" + attr;\n  return upper2dash(attr);\n}\nconst eventsPropTypes = EVENTS.reduce((types, name) => {\n  types[name] = PropTypes.func;\n  return types;\n}, {});\nclass ReactKotlinPlayground extends Component {\n  constructor(props, ...args) {\n    super(props, ...args);\n    this.code = /*#__PURE__*/createRef();\n    EVENTS.forEach(event => {\n      if (!this[event]) this[event] = this.createProxy(event);\n    });\n  }\n  createProxy(name) {\n    return (...args) => {\n      if (this.props[name]) this.props[name](...args);\n    };\n  }\n  initPlayground() {\n    console.log('codeRef: ', this.code);\n    const isInited = this.code && this.code.current && this.code.current.getAttribute(\"data-kotlin-playground-initialized\") === \"true\";\n    if (!isInited && this.props.playground) {\n      const eventFunctions = EVENTS.reduce((events, name) => {\n        events[name] = this[name] || this.props[name];\n        return events;\n      }, {});\n      this.props.playground(this.code.current, eventFunctions);\n    }\n  }\n  componentDidMount() {\n    this.initPlayground();\n  }\n  componentDidUpdate() {\n    this.initPlayground();\n  }\n  render() {\n    const {\n      className,\n      children,\n      //eslint-disable-next-line no-unused-vars\n      playground: _playground,\n      ...props\n    } = this.props;\n    const elementProps = Object.keys(props).reduce((result, name) => {\n      if (EVENTS.indexOf(name) === -1) result[normalizeAttribute(name)] = props[name];\n      return result;\n    }, {});\n    return /*#__PURE__*/createElement(\"div\", {\n      className\n    }, /*#__PURE__*/createElement(\"code\", {\n      ...elementProps,\n      ref: this.code\n    }, children));\n  }\n}\nfunction cloneProps(props) {\n  const clonedProps = {\n    ...props\n  };\n  Object.keys(props).forEach(name => {\n    clonedProps[normalizeAttribute(name)] = props[name];\n  });\n  return clonedProps;\n}\nReactKotlinPlayground.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node.required,\n  playground: PropTypes.func.required,\n  ...eventsPropTypes,\n  ...cloneProps({\n    version: PropTypes.string,\n    args: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n    targetPlatform: PropTypes.oneOf([\"junit\", \"canvas\", \"js\", \"java\"]),\n    highlightOnly: PropTypes.oneOf([\"nocursor\"]),\n    jsLibs: PropTypes.string,\n    autoIndent: PropTypes.bool,\n    theme: PropTypes.string,\n    mode: PropTypes.oneOf([\"kotlin\", \"js\", \"java\", \"groovy\", \"xml\", \"c\", \"shell\", \"swift\", \"obj-c\"]),\n    minCompilerVersion: PropTypes.string,\n    autocomplete: PropTypes.bool,\n    highlightOnFly: PropTypes.bool,\n    indent: PropTypes.number,\n    lines: PropTypes.bool,\n    from: PropTypes.number,\n    to: PropTypes.number,\n    outputHeight: PropTypes.number,\n    matchBrackets: PropTypes.bool\n  })\n};\nexport default ReactKotlinPlayground;","map":{"version":3,"names":["Component","createElement","createRef","PropTypes","EVENTS","DATA_ATTRS","upper2dash","str","replace","toLowerCase","normalizeAttribute","name","attr","indexOf","eventsPropTypes","reduce","types","func","ReactKotlinPlayground","constructor","props","args","code","forEach","event","createProxy","initPlayground","console","log","isInited","current","getAttribute","playground","eventFunctions","events","componentDidMount","componentDidUpdate","render","className","children","_playground","elementProps","Object","keys","result","ref","cloneProps","clonedProps","propTypes","string","node","required","version","oneOfType","arrayOf","targetPlatform","oneOf","highlightOnly","jsLibs","autoIndent","bool","theme","mode","minCompilerVersion","autocomplete","highlightOnFly","indent","number","lines","from","to","outputHeight","matchBrackets"],"sources":["/Users/benedict.daly/Apps/react-node-websockets-demo/client/src/KotlinComponent.js"],"sourcesContent":["import { Component, createElement, createRef } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst EVENTS = [\n    \"onChange\",\n    \"onConsoleOpen\",\n    \"onConsoleClose\",\n    \"getInstance\",\n    \"getJsCode\",\n    \"onRun\",\n    \"onError\",\n];\n\nconst DATA_ATTRS = [\n    \"version\",\n    \"targetPlatform\",\n    \"highlightOnly\",\n    \"jsLibs\",\n    \"minCompilerVersion\",\n    \"autocomplete\",\n    \"outputHeight\",\n    \"trackRunId\",\n    \"crosslink\",\n];\n\nfunction upper2dash(str) {\n    return str.replace(/[A-Z]/g, \"-$&\").toLowerCase();\n}\n\nfunction normalizeAttribute(name) {\n    let attr = name;\n    if (DATA_ATTRS.indexOf(name) !== -1) attr = \"data-\" + attr;\n    return upper2dash(attr);\n}\n\nconst eventsPropTypes = EVENTS.reduce((types, name) => {\n    types[name] = PropTypes.func;\n    return types;\n}, {});\n\nclass ReactKotlinPlayground extends Component {\n    constructor(props, ...args) {\n        super(props, ...args);\n\n        this.code = createRef();\n\n        EVENTS.forEach((event) => {\n            if (!this[event]) this[event] = this.createProxy(event);\n        });\n    }\n\n    createProxy(name) {\n        return (...args) => {\n            if (this.props[name]) this.props[name](...args);\n        };\n    }\n\n    initPlayground() {\n        console.log('codeRef: ', this.code)\n        const isInited =\n            this.code &&\n            this.code.current &&\n            this.code.current.getAttribute(\n                \"data-kotlin-playground-initialized\"\n            ) === \"true\";\n\n        if (!isInited && this.props.playground) {\n            const eventFunctions = EVENTS.reduce((events, name) => {\n                events[name] = this[name] || this.props[name];\n                return events;\n            }, {});\n\n            this.props.playground(this.code.current, eventFunctions);\n        }\n    }\n\n    componentDidMount() {\n        this.initPlayground();\n    }\n\n    componentDidUpdate() {\n        this.initPlayground();\n    }\n\n    render() {\n        const {\n            className,\n            children,\n            //eslint-disable-next-line no-unused-vars\n            playground: _playground,\n            ...props\n        } = this.props;\n\n        const elementProps = Object.keys(props).reduce((result, name) => {\n            if (EVENTS.indexOf(name) === -1)\n                result[normalizeAttribute(name)] = props[name];\n            return result;\n        }, {});\n\n        return createElement(\n            \"div\",\n            { className },\n            createElement(\"code\", { ...elementProps, ref: this.code }, children)\n        );\n    }\n}\n\nfunction cloneProps(props) {\n    const clonedProps = { ...props };\n\n    Object.keys(props).forEach((name) => {\n        clonedProps[normalizeAttribute(name)] = props[name];\n    });\n\n    return clonedProps;\n}\n\nReactKotlinPlayground.propTypes = {\n    className: PropTypes.string,\n    children: PropTypes.node.required,\n    playground: PropTypes.func.required,\n\n    ...eventsPropTypes,\n\n    ...cloneProps({\n        version: PropTypes.string,\n        args: PropTypes.oneOfType([\n            PropTypes.string,\n            PropTypes.arrayOf(PropTypes.string),\n        ]),\n        targetPlatform: PropTypes.oneOf([\"junit\", \"canvas\", \"js\", \"java\"]),\n        highlightOnly: PropTypes.oneOf([\"nocursor\"]),\n        jsLibs: PropTypes.string,\n        autoIndent: PropTypes.bool,\n        theme: PropTypes.string,\n        mode: PropTypes.oneOf([\n            \"kotlin\",\n            \"js\",\n            \"java\",\n            \"groovy\",\n            \"xml\",\n            \"c\",\n            \"shell\",\n            \"swift\",\n            \"obj-c\",\n        ]),\n        minCompilerVersion: PropTypes.string,\n        autocomplete: PropTypes.bool,\n        highlightOnFly: PropTypes.bool,\n        indent: PropTypes.number,\n        lines: PropTypes.bool,\n        from: PropTypes.number,\n        to: PropTypes.number,\n        outputHeight: PropTypes.number,\n        matchBrackets: PropTypes.bool,\n    }),\n};\n\nexport default ReactKotlinPlayground;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}