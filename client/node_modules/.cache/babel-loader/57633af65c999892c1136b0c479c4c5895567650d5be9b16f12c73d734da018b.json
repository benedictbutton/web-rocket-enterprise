{"ast":null,"code":"import * as React from 'react';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction getSelectedNode() {\n  if (document.selection) {\n    return document.selection.createRange().parentElement();\n  }\n  var selection = window.getSelection();\n  if (selection.rangeCount > 0) {\n    return selection.getRangeAt(0).startContainer.parentNode;\n  }\n  return null;\n}\nfunction normalizeHtml(str) {\n  return str && str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ');\n}\nfunction replaceCaret(el) {\n  // Place the caret at the end of the element\n  var target = document.createTextNode('');\n  el.appendChild(target);\n  // do not move caret if element was not focused\n  var isTargetFocused = document.activeElement === el;\n  if (target !== null && target.nodeValue !== null && isTargetFocused) {\n    var sel = window.getSelection();\n    if (sel !== null) {\n      var range = document.createRange();\n      range.setStart(target, target.nodeValue.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n    if (el instanceof HTMLElement) el.focus();\n  }\n}\n\n/* eslint-disable react/prop-types */\n/**\n * Based on https://github.com/lovasoa/react-contenteditable\n * A simple component for a html element with editable contents.\n */\nvar ContentEditable = React.memo(React.forwardRef(function ContentEditable(_a, ref) {\n  var className = _a.className,\n    disabled = _a.disabled,\n    tagName = _a.tagName,\n    value = _a.value,\n    rest = __rest(_a, [\"className\", \"disabled\", \"tagName\", \"value\"]);\n  var elRef = React.useRef();\n  var htmlRef = React.useRef(value);\n  var restRef = React.useRef(rest);\n  React.useEffect(function () {\n    restRef.current = rest;\n    var el = elRef.current;\n    if (el && normalizeHtml(htmlRef.current) !== normalizeHtml(value)) {\n      htmlRef.current = value;\n      el.innerHTML = value;\n      replaceCaret(el);\n    }\n  });\n  return React.useMemo(function () {\n    function onSetRef($el) {\n      elRef.current = $el;\n      if (typeof ref === 'function') {\n        ref($el);\n      } else if (typeof ref === 'object') {\n        // eslint-disable-next-line no-param-reassign\n        ref.current = $el;\n      }\n    }\n    function onChange(event) {\n      var _a, _b;\n      var el = elRef.current;\n      if (!el) {\n        return;\n      }\n      var elementHtml = el.innerHTML;\n      if (elementHtml !== htmlRef.current) {\n        (_b = (_a = restRef.current).onChange) === null || _b === void 0 ? void 0 : _b.call(_a, __assign(__assign({}, event), {\n          target: {\n            value: elementHtml,\n            name: rest.name\n          }\n        }));\n      }\n      htmlRef.current = elementHtml;\n    }\n    return React.createElement(tagName || 'div', __assign(__assign({}, rest), {\n      className: className,\n      contentEditable: !disabled,\n      dangerouslySetInnerHTML: {\n        __html: value\n      },\n      onBlur: function (e) {\n        return (restRef.current.onBlur || onChange)(e);\n      },\n      onInput: onChange,\n      onKeyDown: function (e) {\n        return (restRef.current.onKeyDown || onChange)(e);\n      },\n      onKeyUp: function (e) {\n        return (restRef.current.onKeyUp || onChange)(e);\n      },\n      ref: onSetRef\n    }));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [className, disabled, tagName]);\n}));\nvar EditorContext = React.createContext(null);\nfunction EditorProvider(_a) {\n  var children = _a.children;\n  var _b = React.useState({\n      htmlMode: false,\n      update: update\n    }),\n    state = _b[0],\n    setState = _b[1];\n  function update(attrs) {\n    setState(function (prevState) {\n      return __assign(__assign(__assign({}, prevState), attrs), {\n        date: Date.now()\n      });\n    });\n  }\n  return React.createElement(EditorContext.Provider, {\n    value: state\n  }, children);\n}\nfunction useEditorState() {\n  var context = React.useContext(EditorContext);\n  if (!context) {\n    throw new Error('You should wrap your component by EditorProvider');\n  }\n  return context;\n}\nfunction HtmlEditor(_a) {\n  var rest = __rest(_a, []);\n  return React.createElement(\"textarea\", __assign({}, rest));\n}\nvar e = [],\n  t = [];\nfunction n(n, r) {\n  if (n && \"undefined\" != typeof document) {\n    var a,\n      s = !0 === r.prepend ? \"prepend\" : \"append\",\n      d = !0 === r.singleTag,\n      i = \"string\" == typeof r.container ? document.querySelector(r.container) : document.getElementsByTagName(\"head\")[0];\n    if (d) {\n      var u = e.indexOf(i);\n      -1 === u && (u = e.push(i) - 1, t[u] = {}), a = t[u] && t[u][s] ? t[u][s] : t[u][s] = c();\n    } else a = c();\n    65279 === n.charCodeAt(0) && (n = n.substring(1)), a.styleSheet ? a.styleSheet.cssText += n : a.appendChild(document.createTextNode(n));\n  }\n  function c() {\n    var e = document.createElement(\"style\");\n    if (e.setAttribute(\"type\", \"text/css\"), r.attributes) for (var t = Object.keys(r.attributes), n = 0; n < t.length; n++) e.setAttribute(t[n], r.attributes[t[n]]);\n    var a = \"prepend\" === s ? \"afterbegin\" : \"beforeend\";\n    return i.insertAdjacentElement(a, e), e;\n  }\n}\nvar css = \".rsw-editor{border:1px solid #ddd;border-radius:.375rem;display:flex;flex-direction:column;min-height:100px;overflow:hidden}.rsw-ce{flex:1 0 auto;outline:none;padding:.5rem}.rsw-ce[contentEditable=true]:empty:not(:focus):before{color:grey;content:attr(placeholder)}.rsw-html{background:transparent;border:none;font-family:monospace,Courier New}.rsw-separator{align-self:stretch;border-right:1px solid #ddd;display:flex;margin:0 3px}.rsw-dd{box-sizing:border-box;outline:none}.rsw-btn{background:transparent;border:0;color:#222;cursor:pointer;font-size:1em;height:2em;outline:none;padding:0;width:2em}.rsw-btn:hover{background:#eaeaea}.rsw-btn[data-active=true]{background:#e0e0e0}.rsw-toolbar{align-items:center;background-color:#f5f5f5;border-bottom:1px solid #ddd;display:flex}\";\nn(css, {});\nfunction Editor(_a) {\n  var children = _a.children,\n    containerProps = _a.containerProps,\n    onSelect = _a.onSelect,\n    rest = __rest(_a, [\"children\", \"containerProps\", \"onSelect\"]);\n  var editorState = useEditorState();\n  React.useEffect(function () {\n    document.addEventListener('click', onClickOutside);\n    return function () {\n      return document.removeEventListener('click', onClickOutside);\n    };\n  });\n  function onClickOutside(event) {\n    var _a;\n    if (event.target === editorState.$el) {\n      return;\n    }\n    if ((_a = editorState.$el) === null || _a === void 0 ? void 0 : _a.contains(event.target)) {\n      return;\n    }\n    editorState.update({\n      $selection: null\n    });\n  }\n  function onTextSelect(event) {\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(event);\n    editorState.update({\n      $selection: getSelectedNode()\n    });\n  }\n  function setContentEditableRef($el) {\n    editorState.update({\n      $el: $el\n    });\n  }\n  if (editorState.htmlMode) {\n    return React.createElement(\"div\", __assign({\n      className: \"rsw-editor\"\n    }, containerProps), children, React.createElement(HtmlEditor, __assign({}, rest, {\n      className: \"rsw-ce rsw-html\"\n    })));\n  }\n  return React.createElement(\"div\", __assign({\n    className: \"rsw-editor\"\n  }, containerProps), children, React.createElement(ContentEditable, __assign({}, rest, {\n    ref: setContentEditableRef,\n    onSelect: onTextSelect,\n    className: \"rsw-ce\"\n  })));\n}\nfunction OrderedListIcon() {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"20\",\n    height: \"20\",\n    viewBox: \"0 0 24 24\",\n    style: {\n      verticalAlign: 'text-top'\n    }\n  }, React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M6.99938 12.998v-2H20.9994v2H6.99938zm0 6.0001v-2H20.9994v2H6.99938zm0-12.00001v-2H20.9994v2H6.99938zm-4 1v-3h-1v-1h2v4h-1zm-1 9.00001v-1h3v4h-3v-1h2v-.5h-1v-1h1v-.5h-2zM4.25 10c.41421 0 .75.3358.75.75 0 .2024-.08017.3861-.2105.521L3.11983 13H5v1H2v-.9218L4 11H2v-1h2.25z\"\n  }));\n}\nfunction UnorderedListIcon() {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"20\",\n    height: \"20\",\n    viewBox: \"0 0 24 24\",\n    style: {\n      verticalAlign: 'text-top'\n    }\n  }, React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M7 5h14v2H7V5zm0 8v-2h14v2H7zM4 4.50001c.83 0 1.5.66992 1.5 1.5 0 .83007-.67 1.5-1.5 1.5s-1.5-.66993-1.5-1.5c0-.83008.67-1.5 1.5-1.5zM4 10.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM7 19v-2h14v2H7zm-3-2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z\"\n  }));\n}\nvar BtnBold = createButton('Bold', '𝐁', 'bold');\nvar BtnBulletList = createButton('Bullet list', React.createElement(UnorderedListIcon, null), 'insertUnorderedList');\nvar BtnClearFormatting = createButton('Clear formatting', 'T̲ₓ', 'removeFormat');\nvar BtnItalic = createButton('Italic', '𝑰', 'italic');\nvar BtnStrikeThrough = createButton('Strike through', React.createElement(\"s\", null, \"ab\"), 'strikeThrough');\nvar BtnLink = createButton('Link', '🔗', function (_a) {\n  var $selection = _a.$selection;\n  if (($selection === null || $selection === void 0 ? void 0 : $selection.nodeName) === 'A') {\n    document.execCommand('unlink');\n  } else {\n    // eslint-disable-next-line no-alert\n    document.execCommand('createLink', false, prompt('URL', ''));\n  }\n});\nvar BtnNumberedList = createButton('Numbered list', React.createElement(OrderedListIcon, null), 'insertOrderedList');\nvar BtnRedo = createButton('Redo', '↷', 'redo');\nvar BtnUnderline = createButton('Underline', React.createElement(\"span\", {\n  style: {\n    textDecoration: 'underline'\n  }\n}, \"\\uD835\\uDC14\"), 'underline');\nvar BtnUndo = createButton('Undo', '↶', 'undo');\nfunction createButton(title, content, command) {\n  ButtonFactory.displayName = title.replace(/\\s/g, '');\n  return ButtonFactory;\n  function ButtonFactory(props) {\n    var editorState = useEditorState();\n    var $el = editorState.$el,\n      $selection = editorState.$selection;\n    var active = false;\n    if (typeof command === 'string') {\n      active = !!$selection && document.queryCommandState(command);\n    }\n    function onAction(e) {\n      e.preventDefault();\n      if (document.activeElement !== $el) {\n        $el.focus();\n      }\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command);\n      }\n    }\n    if (editorState.htmlMode) {\n      return null;\n    }\n    return React.createElement(\"button\", __assign({\n      type: \"button\",\n      title: title\n    }, props, {\n      className: \"rsw-btn\",\n      onMouseDown: onAction,\n      \"data-active\": active\n    }), content);\n  }\n}\nvar BtnStyles = createDropdown('Styles', [['Normal', 'formatBlock', 'DIV'], ['𝗛𝗲𝗮𝗱𝗲𝗿 𝟭', 'formatBlock', 'H1'], ['Header 2', 'formatBlock', 'H2'], ['𝙲𝚘𝚍𝚎', 'formatBlock', 'PRE']]);\nfunction createDropdown(title, items) {\n  DropdownFactory.displayName = title;\n  return DropdownFactory;\n  function DropdownFactory(props) {\n    var editorState = useEditorState();\n    var $el = editorState.$el,\n      $selection = editorState.$selection,\n      htmlMode = editorState.htmlMode;\n    if (htmlMode) {\n      return null;\n    }\n    var activeIndex = items.findIndex(function (item) {\n      return item[1] === 'formatBlock' && ($selection === null || $selection === void 0 ? void 0 : $selection.nodeName) === item[2];\n    });\n    return React.createElement(Dropdown, __assign({}, props, {\n      onChange: onChange,\n      title: title,\n      items: items,\n      selected: activeIndex\n    }));\n    function onChange(e) {\n      var target = e.target;\n      var selectedValue = target.value;\n      var selectedIndex = parseInt(selectedValue, 10);\n      var _a = items[selectedIndex],\n        command = _a[1],\n        commandArgument = _a[2];\n      e.preventDefault();\n      if (document.activeElement !== $el) {\n        $el.focus();\n      }\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command, false, commandArgument);\n      }\n      setTimeout(function () {\n        return target.value = selectedValue;\n      }, 10);\n    }\n  }\n}\nfunction Dropdown(_a) {\n  var items = _a.items,\n    selected = _a.selected,\n    inputProps = __rest(_a, [\"items\", \"selected\"]);\n  return React.createElement(\"select\", __assign({}, inputProps, {\n    value: selected,\n    className: \"rsw-dd\"\n  }), React.createElement(\"option\", {\n    hidden: true\n  }, inputProps.title), items.map(function (item, index) {\n    return React.createElement(\"option\", {\n      key: item[2],\n      value: index\n    }, item[0]);\n  }));\n}\nfunction HtmlButton(_a) {\n  var rest = __rest(_a, []);\n  var editorState = useEditorState();\n  function onClick() {\n    editorState.update({\n      htmlMode: !editorState.htmlMode\n    });\n  }\n  return React.createElement(\"button\", __assign({\n    type: \"button\",\n    title: \"HTML mode\",\n    className: \"rsw-btn\",\n    onClick: onClick,\n    \"data-active\": editorState.htmlMode\n  }, rest), \"</>\");\n}\nfunction Separator() {\n  var editorState = useEditorState();\n  if (editorState.htmlMode) {\n    return null;\n  }\n  return React.createElement(\"div\", {\n    className: \"rsw-separator\"\n  });\n}\nfunction Toolbar(props) {\n  return React.createElement(\"div\", __assign({}, props, {\n    className: \"rsw-toolbar\"\n  }));\n}\nfunction DefaultEditor(props) {\n  return React.createElement(EditorProvider, null, React.createElement(Editor, __assign({}, props), React.createElement(Toolbar, null, React.createElement(BtnUndo, null), React.createElement(BtnRedo, null), React.createElement(Separator, null), React.createElement(BtnBold, null), React.createElement(BtnItalic, null), React.createElement(BtnUnderline, null), React.createElement(BtnStrikeThrough, null), React.createElement(Separator, null), React.createElement(BtnNumberedList, null), React.createElement(BtnBulletList, null), React.createElement(Separator, null), React.createElement(BtnLink, null), React.createElement(BtnClearFormatting, null), React.createElement(HtmlButton, null), React.createElement(Separator, null), React.createElement(BtnStyles, null))));\n}\nexport { BtnBold, BtnBulletList, BtnClearFormatting, BtnItalic, BtnLink, BtnNumberedList, BtnRedo, BtnStrikeThrough, BtnStyles, BtnUnderline, BtnUndo, ContentEditable, DefaultEditor, Dropdown, Editor, EditorContext, EditorProvider, HtmlButton, HtmlEditor, Separator, Toolbar, createButton, createDropdown, DefaultEditor as default, useEditorState };","map":{"version":3,"names":["getSelectedNode","document","selection","createRange","parentElement","window","getSelection","rangeCount","getRangeAt","startContainer","parentNode","normalizeHtml","str","replace","replaceCaret","el","target","createTextNode","appendChild","isTargetFocused","activeElement","nodeValue","sel","range","setStart","length","collapse","removeAllRanges","addRange","HTMLElement","focus","ContentEditable","React","memo","forwardRef","_a","ref","className","disabled","tagName","value","rest","__rest","elRef","useRef","htmlRef","restRef","useEffect","current","innerHTML","useMemo","onSetRef","$el","onChange","event","elementHtml","_b","call","__assign","name","createElement","contentEditable","dangerouslySetInnerHTML","__html","onBlur","e","onInput","onKeyDown","onKeyUp","EditorContext","createContext","EditorProvider","children","useState","htmlMode","update","state","setState","attrs","prevState","date","Date","now","Provider","useEditorState","context","useContext","Error","HtmlEditor","Editor","containerProps","onSelect","editorState","addEventListener","onClickOutside","removeEventListener","contains","$selection","onTextSelect","setContentEditableRef","OrderedListIcon","xmlns","width","height","viewBox","style","verticalAlign","fill","d","UnorderedListIcon","BtnBold","createButton","BtnBulletList","BtnClearFormatting","BtnItalic","BtnStrikeThrough","BtnLink","nodeName","execCommand","prompt","BtnNumberedList","BtnRedo","BtnUnderline","textDecoration","BtnUndo","title","content","command","ButtonFactory","displayName","props","active","queryCommandState","onAction","preventDefault","type","onMouseDown","BtnStyles","createDropdown","items","DropdownFactory","activeIndex","findIndex","item","Dropdown","selected","selectedValue","selectedIndex","parseInt","commandArgument","setTimeout","inputProps","hidden","map","index","key","HtmlButton","onClick","Separator","Toolbar","DefaultEditor"],"sources":["/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/utils.ts","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/editor/ContentEditable.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/editor/EditorContext.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/editor/HtmlEditor.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/editor/Editor.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/toolbar/icons/OrderedListIcon.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/toolbar/icons/UnorderedListIcon.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/toolbar/buttons.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/toolbar/dropdowns.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/toolbar/HtmlButton.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/toolbar/Separator.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/toolbar/Toolbar.tsx","/Users/benedict.daly/Apps/react-node-websockets-demo/client/node_modules/react-simple-wysiwyg/src/editor/DefaultEditor.tsx"],"sourcesContent":["export function getSelectedNode(): Node {\n  if ((document as any).selection) {\n    return (document as any).selection.createRange().parentElement();\n  }\n\n  const selection = window.getSelection();\n  if (selection.rangeCount > 0) {\n    return selection.getRangeAt(0).startContainer.parentNode;\n  }\n\n  return null;\n}\n\nexport function normalizeHtml(str: string): string {\n  return str && str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ');\n}\n\nexport function replaceCaret(el: HTMLElement) {\n  // Place the caret at the end of the element\n  const target = document.createTextNode('');\n  el.appendChild(target);\n\n  // do not move caret if element was not focused\n  const isTargetFocused = document.activeElement === el;\n  if (target !== null && target.nodeValue !== null && isTargetFocused) {\n    const sel = window.getSelection();\n    if (sel !== null) {\n      const range = document.createRange();\n      range.setStart(target, target.nodeValue.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n    if (el instanceof HTMLElement) el.focus();\n  }\n}\n","/* eslint-disable react/prop-types */\n\nimport * as React from 'react';\nimport { normalizeHtml, replaceCaret } from '../utils';\n\n/**\n * Based on https://github.com/lovasoa/react-contenteditable\n * A simple component for a html element with editable contents.\n */\nexport const ContentEditable = React.memo(\n  React.forwardRef(function ContentEditable(\n    { className, disabled, tagName, value, ...rest }: ContentEditableProps,\n    ref: React.ForwardedRef<HTMLElement>,\n  ) {\n    const elRef = React.useRef<HTMLElement>();\n    const htmlRef = React.useRef(value);\n    const restRef = React.useRef(rest);\n\n    React.useEffect(() => {\n      restRef.current = rest;\n      const el = elRef.current;\n      if (el && normalizeHtml(htmlRef.current) !== normalizeHtml(value)) {\n        htmlRef.current = value;\n        el.innerHTML = value;\n        replaceCaret(el);\n      }\n    });\n\n    return React.useMemo(() => {\n      function onSetRef($el: HTMLElement) {\n        elRef.current = $el;\n        if (typeof ref === 'function') {\n          ref($el);\n        } else if (typeof ref === 'object') {\n          // eslint-disable-next-line no-param-reassign\n          ref.current = $el;\n        }\n      }\n\n      function onChange(event: React.SyntheticEvent<any>) {\n        const el = elRef.current;\n        if (!el) {\n          return;\n        }\n\n        const elementHtml = el.innerHTML;\n        if (elementHtml !== htmlRef.current) {\n          restRef.current.onChange?.({\n            ...event,\n            target: {\n              value: elementHtml,\n              name: rest.name,\n            } as any,\n          });\n        }\n\n        htmlRef.current = elementHtml;\n      }\n\n      return React.createElement(tagName || 'div', {\n        ...rest,\n        className,\n        contentEditable: !disabled,\n        dangerouslySetInnerHTML: { __html: value },\n        onBlur: (e) => (restRef.current.onBlur || onChange)(e),\n        onInput: onChange,\n        onKeyDown: (e) => (restRef.current.onKeyDown || onChange)(e),\n        onKeyUp: (e) => (restRef.current.onKeyUp || onChange)(e),\n        ref: onSetRef,\n      });\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [className, disabled, tagName]);\n  }),\n);\n\nexport type ContentEditableEvent = React.SyntheticEvent<any, Event> & {\n  target: { name?: string; value: string };\n};\n\nexport interface ContentEditableProps\n  extends React.HTMLAttributes<HTMLElement> {\n  disabled?: boolean;\n  contentEditableRef?: (el: HTMLElement) => void;\n  name?: string;\n  onChange?: (event: ContentEditableEvent) => void;\n  tagName?: string;\n  value?: string;\n}\n","import * as React from 'react';\n\nexport const EditorContext = React.createContext<EditorState>(null);\n\nexport function EditorProvider({ children }: { children: React.ReactNode }) {\n  const [state, setState] = React.useState<EditorState>({\n    htmlMode: false,\n    update,\n  });\n\n  function update(attrs) {\n    setState((prevState) => {\n      return {\n        ...prevState,\n        ...attrs,\n        date: Date.now(),\n      };\n    });\n  }\n\n  return (\n    <EditorContext.Provider value={state}>{children}</EditorContext.Provider>\n  );\n}\n\nexport function useEditorState(): EditorState {\n  const context = React.useContext(EditorContext);\n  if (!context) {\n    throw new Error('You should wrap your component by EditorProvider');\n  }\n\n  return context;\n}\n\nexport interface EditorState {\n  update(attrs: Partial<EditorState>): void;\n  $el?: HTMLElement;\n  $selection?: Node;\n  htmlMode: boolean;\n}\n","import * as React from 'react';\n\nexport function HtmlEditor({ ...rest }) {\n  return <textarea {...rest} />;\n}\n","import { ComponentProps } from 'react';\nimport * as React from 'react';\nimport { getSelectedNode } from '../utils';\nimport { ContentEditable, ContentEditableProps } from './ContentEditable';\nimport { useEditorState } from './EditorContext';\nimport { HtmlEditor } from './HtmlEditor';\nimport '../styles.css';\n\nexport function Editor({\n  children,\n  containerProps,\n  onSelect,\n  ...rest\n}: EditorProps) {\n  const editorState = useEditorState();\n\n  React.useEffect(() => {\n    document.addEventListener('click', onClickOutside);\n    return () => document.removeEventListener('click', onClickOutside);\n  });\n\n  function onClickOutside(event: MouseEvent) {\n    if (event.target === editorState.$el) {\n      return;\n    }\n\n    if (editorState.$el?.contains(event.target as HTMLElement)) {\n      return;\n    }\n\n    editorState.update({ $selection: null });\n  }\n\n  function onTextSelect(event: React.SyntheticEvent<HTMLElement>) {\n    onSelect?.(event);\n    editorState.update({ $selection: getSelectedNode() });\n  }\n\n  function setContentEditableRef($el: HTMLElement) {\n    editorState.update({ $el });\n  }\n\n  if (editorState.htmlMode) {\n    return (\n      <div className=\"rsw-editor\" {...containerProps}>\n        {children}\n        <HtmlEditor {...rest} className=\"rsw-ce rsw-html\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"rsw-editor\" {...containerProps}>\n      {children}\n      <ContentEditable\n        {...rest}\n        ref={setContentEditableRef}\n        onSelect={onTextSelect}\n        className=\"rsw-ce\"\n      />\n    </div>\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface EditorProps extends ContentEditableProps {\n  containerProps?: ComponentProps<'div'>;\n}\n","import * as React from 'react';\n\nexport default function OrderedListIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      style={{ verticalAlign: 'text-top' }}\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M6.99938 12.998v-2H20.9994v2H6.99938zm0 6.0001v-2H20.9994v2H6.99938zm0-12.00001v-2H20.9994v2H6.99938zm-4 1v-3h-1v-1h2v4h-1zm-1 9.00001v-1h3v4h-3v-1h2v-.5h-1v-1h1v-.5h-2zM4.25 10c.41421 0 .75.3358.75.75 0 .2024-.08017.3861-.2105.521L3.11983 13H5v1H2v-.9218L4 11H2v-1h2.25z\"\n      />\n    </svg>\n  );\n}\n","import * as React from 'react';\n\nexport default function UnorderedListIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      style={{ verticalAlign: 'text-top' }}\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M7 5h14v2H7V5zm0 8v-2h14v2H7zM4 4.50001c.83 0 1.5.66992 1.5 1.5 0 .83007-.67 1.5-1.5 1.5s-1.5-.66993-1.5-1.5c0-.83008.67-1.5 1.5-1.5zM4 10.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM7 19v-2h14v2H7zm-3-2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z\"\n      />\n    </svg>\n  );\n}\n","import * as React from 'react';\nimport type { HTMLAttributes, ReactNode } from 'react';\nimport { EditorState, useEditorState } from '../editor';\nimport OrderedListIcon from './icons/OrderedListIcon';\nimport UnorderedListIcon from './icons/UnorderedListIcon';\n\nexport const BtnBold = createButton('Bold', '𝐁', 'bold');\n\nexport const BtnBulletList = createButton(\n  'Bullet list',\n  <UnorderedListIcon />,\n  'insertUnorderedList',\n);\n\nexport const BtnClearFormatting = createButton(\n  'Clear formatting',\n  'T̲ₓ',\n  'removeFormat',\n);\n\nexport const BtnItalic = createButton('Italic', '𝑰', 'italic');\n\nexport const BtnStrikeThrough = createButton(\n  'Strike through',\n  <s>ab</s>,\n  'strikeThrough',\n);\n\nexport const BtnLink = createButton('Link', '🔗', ({ $selection }) => {\n  if ($selection?.nodeName === 'A') {\n    document.execCommand('unlink');\n  } else {\n    // eslint-disable-next-line no-alert\n    document.execCommand('createLink', false, prompt('URL', ''));\n  }\n});\n\nexport const BtnNumberedList = createButton(\n  'Numbered list',\n  <OrderedListIcon />,\n  'insertOrderedList',\n);\n\nexport const BtnRedo = createButton('Redo', '↷', 'redo');\n\nexport const BtnUnderline = createButton(\n  'Underline',\n  <span style={{ textDecoration: 'underline' }}>𝐔</span>,\n  'underline',\n);\n\nexport const BtnUndo = createButton('Undo', '↶', 'undo');\n\nexport function createButton(\n  title: string,\n  content: ReactNode,\n  command: ((state: EditorState) => void) | string,\n) {\n  ButtonFactory.displayName = title.replace(/\\s/g, '');\n\n  return ButtonFactory;\n\n  function ButtonFactory(props: HTMLAttributes<HTMLButtonElement>) {\n    const editorState = useEditorState();\n    const { $el, $selection } = editorState;\n\n    let active = false;\n    if (typeof command === 'string') {\n      active = !!$selection && document.queryCommandState(command);\n    }\n\n    function onAction(e: React.MouseEvent<HTMLButtonElement>) {\n      e.preventDefault();\n\n      if (document.activeElement !== $el) {\n        $el.focus();\n      }\n\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command);\n      }\n    }\n\n    if (editorState.htmlMode) {\n      return null;\n    }\n\n    return (\n      <button\n        type=\"button\"\n        title={title}\n        {...props}\n        className=\"rsw-btn\"\n        onMouseDown={onAction}\n        data-active={active}\n      >\n        {content}\n      </button>\n    );\n  }\n}\n","import * as React from 'react';\nimport type { ChangeEvent, HTMLAttributes } from 'react';\nimport { EditorState, useEditorState } from '../editor';\n\nexport const BtnStyles = createDropdown('Styles', [\n  ['Normal', 'formatBlock', 'DIV'],\n  ['𝗛𝗲𝗮𝗱𝗲𝗿 𝟭', 'formatBlock', 'H1'],\n  ['Header 2', 'formatBlock', 'H2'],\n  ['𝙲𝚘𝚍𝚎', 'formatBlock', 'PRE'],\n]);\n\nexport function createDropdown(\n  title: string,\n  items: DropDownItem[],\n): typeof Dropdown {\n  DropdownFactory.displayName = title;\n\n  return DropdownFactory;\n\n  function DropdownFactory(props: DropdownProps) {\n    const editorState = useEditorState();\n    const { $el, $selection, htmlMode } = editorState;\n\n    if (htmlMode) {\n      return null;\n    }\n\n    const activeIndex = items.findIndex(\n      (item) => item[1] === 'formatBlock' && $selection?.nodeName === item[2],\n    );\n\n    return (\n      <Dropdown\n        {...props}\n        onChange={onChange}\n        title={title}\n        items={items}\n        selected={activeIndex}\n      />\n    );\n\n    function onChange(e: ChangeEvent<HTMLSelectElement>) {\n      const target = e.target;\n      const selectedValue = target.value;\n      const selectedIndex = parseInt(selectedValue, 10);\n\n      const [, command, commandArgument] = items[selectedIndex];\n\n      e.preventDefault();\n\n      if (document.activeElement !== $el) {\n        $el.focus();\n      }\n\n      if (typeof command === 'function') {\n        command(editorState);\n      } else {\n        document.execCommand(command, false, commandArgument);\n      }\n\n      setTimeout(() => (target.value = selectedValue), 10);\n    }\n  }\n}\n\nexport function Dropdown({ items, selected, ...inputProps }: DropdownProps) {\n  return (\n    <select {...inputProps} value={selected} className=\"rsw-dd\">\n      <option hidden>{inputProps.title}</option>\n      {items.map((item, index) => (\n        <option key={item[2]} value={index}>\n          {item[0]}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nexport type DropDownItem = [\n  string,\n  string | ((editorState: EditorState) => void),\n  string,\n];\n\nexport interface DropdownProps extends HTMLAttributes<HTMLSelectElement> {\n  selected?: number;\n  items?: DropDownItem[];\n}\n","import * as React from 'react';\nimport { useEditorState } from '../editor/EditorContext';\n\nexport function HtmlButton({ ...rest }) {\n  const editorState = useEditorState();\n\n  function onClick() {\n    editorState.update({\n      htmlMode: !editorState.htmlMode,\n    });\n  }\n\n  return (\n    <button\n      type=\"button\"\n      title=\"HTML mode\"\n      className=\"rsw-btn\"\n      onClick={onClick}\n      data-active={editorState.htmlMode}\n      {...rest}\n    >\n      &lt;/&gt;\n    </button>\n  );\n}\n","import * as React from 'react';\nimport { useEditorState } from '../editor/EditorContext';\n\nexport function Separator() {\n  const editorState = useEditorState();\n\n  if (editorState.htmlMode) {\n    return null;\n  }\n\n  return <div className=\"rsw-separator\" />;\n}\n","import * as React from 'react';\nimport { HTMLAttributes } from 'react';\n\nexport function Toolbar(props: HTMLAttributes<HTMLDivElement>) {\n  return <div {...props} className=\"rsw-toolbar\" />;\n}\n","import * as React from 'react';\nimport { Editor, EditorProps } from './Editor';\nimport { EditorProvider } from './EditorContext';\nimport {\n  BtnBold,\n  BtnBulletList,\n  BtnClearFormatting,\n  BtnItalic,\n  BtnLink,\n  BtnNumberedList,\n  BtnRedo,\n  BtnStrikeThrough,\n  BtnStyles,\n  BtnUnderline,\n  BtnUndo,\n  HtmlButton,\n  Separator,\n  Toolbar,\n} from '../toolbar';\n\nexport function DefaultEditor(props: EditorProps) {\n  return (\n    <EditorProvider>\n      <Editor {...props}>\n        <Toolbar>\n          <BtnUndo />\n          <BtnRedo />\n          <Separator />\n          <BtnBold />\n          <BtnItalic />\n          <BtnUnderline />\n          <BtnStrikeThrough />\n          <Separator />\n          <BtnNumberedList />\n          <BtnBulletList />\n          <Separator />\n          <BtnLink />\n          <BtnClearFormatting />\n          <HtmlButton />\n          <Separator />\n          <BtnStyles />\n        </Toolbar>\n      </Editor>\n    </EditorProvider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}