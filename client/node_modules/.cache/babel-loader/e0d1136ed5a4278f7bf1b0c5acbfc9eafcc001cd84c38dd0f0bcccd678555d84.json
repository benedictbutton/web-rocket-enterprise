{"ast":null,"code":"import { Component, createElement, createRef } from \"react\";\nimport PropTypes from \"prop-types\";\nconst EVENTS = [\"onChange\", \"onConsoleOpen\", \"onConsoleClose\", \"getInstance\", \"getJsCode\", \"onRun\", \"onError\", \"callback\"];\nconst DATA_ATTRS = [\"version\", \"targetPlatform\", \"highlightOnly\", \"jsLibs\", \"minCompilerVersion\", \"autocomplete\", \"outputHeight\", \"trackRunId\", \"crosslink\"];\nfunction upper2dash(str) {\n  return str.replace(/[A-Z]/g, \"-$&\").toLowerCase();\n}\nfunction normalizeAttribute(name) {\n  let attr = name;\n  if (DATA_ATTRS.indexOf(name) !== -1) attr = \"data-\" + attr;\n  return upper2dash(attr);\n}\nconst eventsPropTypes = EVENTS.reduce((types, name) => {\n  types[name] = PropTypes.func;\n  return types;\n}, {});\nclass ReactKotlinPlayground extends Component {\n  constructor(props, ...args) {\n    super(props, ...args);\n    this.code = /*#__PURE__*/createRef();\n    this.state = {};\n    EVENTS.forEach(event => {\n      if (!this[event]) this[event] = this.createProxy(event);\n    });\n    this.handleChange = this.handleChange.bind(this);\n    this.handleInstance = this.handleInstance.bind(this);\n  }\n  createProxy(name) {\n    return (...args) => {\n      if (this.props[name]) this.props[name](...args);\n    };\n  }\n  handleInstance(instance) {\n    this.setState({\n      instance\n    });\n  }\n  handleChange() {\n    // let instance = this;\n    let keys = Object.keys(this.state.instance.codemirror.doc.cm);\n    console.log(this.state.instance.codemirror.doc.cm);\n  }\n  initPlayground() {\n    const isInited = this.code && this.code.current && this.code.current.getAttribute(\"data-kotlin-playground-initialized\") === \"true\";\n    if (!isInited && this.props.playground) {\n      const eventFunctions = EVENTS.reduce((events, name) => {\n        events[name] = this[name] || this.props[name];\n        return events;\n      }, {});\n      eventFunctions[\"onChange\"] = this.handleChange;\n      eventFunctions[\"getInstance\"] = this.handleInstance;\n      this.props.playground(this.code.current, eventFunctions);\n    }\n  }\n  componentDidMount() {\n    this.initPlayground();\n  }\n  componentDidUpdate() {\n    this.initPlayground();\n    console.log('this: ', this);\n  }\n  render() {\n    const {\n      className,\n      children,\n      //eslint-disable-next-line no-unused-vars\n      playground: _playground,\n      ...props\n    } = this.props;\n    const elementProps = Object.keys(props).reduce((result, name) => {\n      if (EVENTS.indexOf(name) === -1) result[normalizeAttribute(name)] = props[name];\n      return result;\n    }, {});\n    return /*#__PURE__*/createElement(\"div\", {\n      className\n    }, /*#__PURE__*/createElement(\"code\", {\n      ...elementProps,\n      ref: this.code\n    }, children));\n  }\n}\nfunction cloneProps(props) {\n  const clonedProps = {\n    ...props\n  };\n  Object.keys(props).forEach(name => {\n    clonedProps[normalizeAttribute(name)] = props[name];\n  });\n  return clonedProps;\n}\n\n// ReactKotlinPlayground.propTypes = {\n//     className: PropTypes.string,\n//     children: PropTypes.node.required,\n//     playground: PropTypes.func.required,\n\n//     ...eventsPropTypes,\n\n//     ...cloneProps({\n//         version: PropTypes.string,\n//         args: PropTypes.oneOfType([\n//             PropTypes.string,\n//             PropTypes.arrayOf(PropTypes.string),\n//         ]),\n//         targetPlatform: PropTypes.oneOf([\"junit\", \"canvas\", \"js\", \"java\"]),\n//         highlightOnly: PropTypes.oneOf([\"nocursor\"]),\n//         jsLibs: PropTypes.string,\n//         autoIndent: PropTypes.bool,\n//         theme: PropTypes.string,\n//         mode: PropTypes.oneOf([\n//             \"kotlin\",\n//             \"js\",\n//             \"java\",\n//             \"groovy\",\n//             \"xml\",\n//             \"c\",\n//             \"shell\",\n//             \"swift\",\n//             \"obj-c\",\n//         ]),\n//         minCompilerVersion: PropTypes.string,\n//         autocomplete: PropTypes.bool,\n//         highlightOnFly: PropTypes.bool,\n//         indent: PropTypes.number,\n//         lines: PropTypes.bool,\n//         from: PropTypes.number,\n//         to: PropTypes.number,\n//         outputHeight: PropTypes.number,\n//         matchBrackets: PropTypes.bool,\n//     }),\n// };\n\nexport default ReactKotlinPlayground;","map":{"version":3,"names":["Component","createElement","createRef","PropTypes","EVENTS","DATA_ATTRS","upper2dash","str","replace","toLowerCase","normalizeAttribute","name","attr","indexOf","eventsPropTypes","reduce","types","func","ReactKotlinPlayground","constructor","props","args","code","state","forEach","event","createProxy","handleChange","bind","handleInstance","instance","setState","keys","Object","codemirror","doc","cm","console","log","initPlayground","isInited","current","getAttribute","playground","eventFunctions","events","componentDidMount","componentDidUpdate","render","className","children","_playground","elementProps","result","ref","cloneProps","clonedProps"],"sources":["/Users/benedict.daly/Apps/react-node-websockets-demo/client/src/KotlinComponent.js"],"sourcesContent":["import { Component, createElement, createRef } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst EVENTS = [\n    \"onChange\",\n    \"onConsoleOpen\",\n    \"onConsoleClose\",\n    \"getInstance\",\n    \"getJsCode\",\n    \"onRun\",\n    \"onError\",\n    \"callback\"\n];\n\nconst DATA_ATTRS = [\n    \"version\",\n    \"targetPlatform\",\n    \"highlightOnly\",\n    \"jsLibs\",\n    \"minCompilerVersion\",\n    \"autocomplete\",\n    \"outputHeight\",\n    \"trackRunId\",\n    \"crosslink\",\n];\n\nfunction upper2dash(str) {\n    return str.replace(/[A-Z]/g, \"-$&\").toLowerCase();\n}\n\nfunction normalizeAttribute(name) {\n    let attr = name;\n    if (DATA_ATTRS.indexOf(name) !== -1) attr = \"data-\" + attr;\n    return upper2dash(attr);\n}\n\nconst eventsPropTypes = EVENTS.reduce((types, name) => {\n    types[name] = PropTypes.func;\n    return types;\n}, {});\n\nclass ReactKotlinPlayground extends Component {\n    constructor(props, ...args) {\n        super(props, ...args);\n\n        this.code = createRef();\n\n        this.state = {}\n\n        EVENTS.forEach((event) => {\n            if (!this[event]) this[event] = this.createProxy(event);\n        });\n        this.handleChange = this.handleChange.bind(this);\n        this.handleInstance = this.handleInstance.bind(this);\n    }\n\n    createProxy(name) {\n        return (...args) => {\n            if (this.props[name]) this.props[name](...args);\n        };\n    }\n\n    handleInstance(instance) {\n        this.setState({instance})\n    }\n\n    handleChange() {\n        // let instance = this;\n        let keys = Object.keys(this.state.instance.codemirror.doc.cm);\n\n        console.log(this.state.instance.codemirror.doc.cm)\n    }\n\n\n    initPlayground() {\n        const isInited =\n            this.code &&\n            this.code.current &&\n            this.code.current.getAttribute(\n                \"data-kotlin-playground-initialized\"\n            ) === \"true\";        \n\n        if (!isInited && this.props.playground) {\n            const eventFunctions = EVENTS.reduce((events, name) => {\n                events[name] = this[name] || this.props[name];\n                return events;\n            }, {});\n            eventFunctions[\"onChange\"] = this.handleChange;\n            eventFunctions[\"getInstance\"] = this.handleInstance;\n \n            this.props.playground(this.code.current, eventFunctions);\n        }\n    }\n\n    componentDidMount() {\n        this.initPlayground();\n    }\n\n    componentDidUpdate() {\n        this.initPlayground();\n        console.log('this: ', this)\n  }\n\n    render() {\n        const {\n            className,\n            children,\n            //eslint-disable-next-line no-unused-vars\n            playground: _playground,\n            ...props\n        } = this.props;\n\n\n        const elementProps = Object.keys(props).reduce((result, name) => {\n            if (EVENTS.indexOf(name) === -1)\n                result[normalizeAttribute(name)] = props[name];\n            return result;\n        }, {});\n\n        return createElement(\n            \"div\",\n            { className },\n            createElement(\"code\", { ...elementProps, ref: this.code }, children)\n        );\n    }\n}\n\nfunction cloneProps(props) {\n    const clonedProps = { ...props };\n\n    Object.keys(props).forEach((name) => {\n        clonedProps[normalizeAttribute(name)] = props[name];\n    });\n\n    return clonedProps;\n}\n\n// ReactKotlinPlayground.propTypes = {\n//     className: PropTypes.string,\n//     children: PropTypes.node.required,\n//     playground: PropTypes.func.required,\n\n//     ...eventsPropTypes,\n\n//     ...cloneProps({\n//         version: PropTypes.string,\n//         args: PropTypes.oneOfType([\n//             PropTypes.string,\n//             PropTypes.arrayOf(PropTypes.string),\n//         ]),\n//         targetPlatform: PropTypes.oneOf([\"junit\", \"canvas\", \"js\", \"java\"]),\n//         highlightOnly: PropTypes.oneOf([\"nocursor\"]),\n//         jsLibs: PropTypes.string,\n//         autoIndent: PropTypes.bool,\n//         theme: PropTypes.string,\n//         mode: PropTypes.oneOf([\n//             \"kotlin\",\n//             \"js\",\n//             \"java\",\n//             \"groovy\",\n//             \"xml\",\n//             \"c\",\n//             \"shell\",\n//             \"swift\",\n//             \"obj-c\",\n//         ]),\n//         minCompilerVersion: PropTypes.string,\n//         autocomplete: PropTypes.bool,\n//         highlightOnFly: PropTypes.bool,\n//         indent: PropTypes.number,\n//         lines: PropTypes.bool,\n//         from: PropTypes.number,\n//         to: PropTypes.number,\n//         outputHeight: PropTypes.number,\n//         matchBrackets: PropTypes.bool,\n//     }),\n// };\n\nexport default ReactKotlinPlayground;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}