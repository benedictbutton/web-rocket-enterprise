{"ast":null,"code":"import { Component, createElement, createRef } from \"react\";\nimport PropTypes from \"prop-types\";\nconst EVENTS = [\"onChange\", \"onConsoleOpen\", \"onConsoleClose\",\n// \"getInstance\",\n\"getJsCode\", \"onRun\", \"onError\"];\nconst DATA_ATTRS = [\"version\", \"targetPlatform\", \"highlightOnly\", \"jsLibs\", \"minCompilerVersion\", \"autocomplete\", \"outputHeight\", \"trackRunId\", \"crosslink\"];\nfunction upper2dash(str) {\n  return str.replace(/[A-Z]/g, \"-$&\").toLowerCase();\n}\nfunction normalizeAttribute(name) {\n  let attr = name;\n  if (DATA_ATTRS.indexOf(name) !== -1) attr = \"data-\" + attr;\n  return upper2dash(attr);\n}\nconst eventsPropTypes = EVENTS.reduce((types, name) => {\n  types[name] = PropTypes.func;\n  return types;\n}, {});\nclass ReactKotlinPlayground extends Component {\n  constructor(props, ...args) {\n    super(props, ...args);\n    this.code = /*#__PURE__*/createRef();\n    EVENTS.forEach(event => {\n      if (!this[event]) this[event] = this.createProxy(event);\n    });\n    // this.handleChange = this.handleChange.bind(this);\n  }\n\n  createProxy(name) {\n    return (...args) => {\n      if (this.props[name]) this.props[name](...args);\n    };\n  }\n  handleChange(instance) {\n    console.log('instance: ', instance);\n    console.log('pokey: ', this);\n  }\n  initPlayground() {\n    const isInited = this.code && this.code.current && this.code.current.getAttribute(\"data-kotlin-playground-initialized\") === \"true\";\n    if (!isInited && this.props.playground) {\n      const eventFunctions = EVENTS.reduce((events, name) => {\n        events[name] = this[name] || this.props[name];\n        return events;\n      }, {});\n      eventFunctions[\"onChange\"] = this.handleChange;\n      this.props.playground(this.code.current, eventFunctions);\n    }\n  }\n  componentDidMount() {\n    this.initPlayground();\n  }\n  componentDidUpdate() {\n    console.log('pokemons state has changed.');\n    this.initPlayground();\n  }\n  render() {\n    const {\n      className,\n      children,\n      //eslint-disable-next-line no-unused-vars\n      playground: _playground,\n      ...props\n    } = this.props;\n    const elementProps = Object.keys(props).reduce((result, name) => {\n      if (EVENTS.indexOf(name) === -1) result[normalizeAttribute(name)] = props[name];\n      return result;\n    }, {});\n    return /*#__PURE__*/createElement(\"div\", {\n      className\n    }, /*#__PURE__*/createElement(\"code\", {\n      ...elementProps,\n      ref: this.code\n    }, children));\n  }\n}\nfunction cloneProps(props) {\n  const clonedProps = {\n    ...props\n  };\n  Object.keys(props).forEach(name => {\n    clonedProps[normalizeAttribute(name)] = props[name];\n  });\n  return clonedProps;\n}\n\n// ReactKotlinPlayground.propTypes = {\n//     className: PropTypes.string,\n//     children: PropTypes.node.required,\n//     playground: PropTypes.func.required,\n\n//     ...eventsPropTypes,\n\n//     ...cloneProps({\n//         version: PropTypes.string,\n//         args: PropTypes.oneOfType([\n//             PropTypes.string,\n//             PropTypes.arrayOf(PropTypes.string),\n//         ]),\n//         targetPlatform: PropTypes.oneOf([\"junit\", \"canvas\", \"js\", \"java\"]),\n//         highlightOnly: PropTypes.oneOf([\"nocursor\"]),\n//         jsLibs: PropTypes.string,\n//         autoIndent: PropTypes.bool,\n//         theme: PropTypes.string,\n//         mode: PropTypes.oneOf([\n//             \"kotlin\",\n//             \"js\",\n//             \"java\",\n//             \"groovy\",\n//             \"xml\",\n//             \"c\",\n//             \"shell\",\n//             \"swift\",\n//             \"obj-c\",\n//         ]),\n//         minCompilerVersion: PropTypes.string,\n//         autocomplete: PropTypes.bool,\n//         highlightOnFly: PropTypes.bool,\n//         indent: PropTypes.number,\n//         lines: PropTypes.bool,\n//         from: PropTypes.number,\n//         to: PropTypes.number,\n//         outputHeight: PropTypes.number,\n//         matchBrackets: PropTypes.bool,\n//     }),\n// };\n\nexport default ReactKotlinPlayground;","map":{"version":3,"names":["Component","createElement","createRef","PropTypes","EVENTS","DATA_ATTRS","upper2dash","str","replace","toLowerCase","normalizeAttribute","name","attr","indexOf","eventsPropTypes","reduce","types","func","ReactKotlinPlayground","constructor","props","args","code","forEach","event","createProxy","handleChange","instance","console","log","initPlayground","isInited","current","getAttribute","playground","eventFunctions","events","componentDidMount","componentDidUpdate","render","className","children","_playground","elementProps","Object","keys","result","ref","cloneProps","clonedProps"],"sources":["/Users/benedict.daly/Apps/react-node-websockets-demo/client/src/KotlinComponent.js"],"sourcesContent":["import { Component, createElement, createRef } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst EVENTS = [\n    \"onChange\",\n    \"onConsoleOpen\",\n    \"onConsoleClose\",\n    // \"getInstance\",\n    \"getJsCode\",\n    \"onRun\",\n    \"onError\",\n];\n\nconst DATA_ATTRS = [\n    \"version\",\n    \"targetPlatform\",\n    \"highlightOnly\",\n    \"jsLibs\",\n    \"minCompilerVersion\",\n    \"autocomplete\",\n    \"outputHeight\",\n    \"trackRunId\",\n    \"crosslink\",\n];\n\nfunction upper2dash(str) {\n    return str.replace(/[A-Z]/g, \"-$&\").toLowerCase();\n}\n\nfunction normalizeAttribute(name) {\n    let attr = name;\n    if (DATA_ATTRS.indexOf(name) !== -1) attr = \"data-\" + attr;\n    return upper2dash(attr);\n}\n\nconst eventsPropTypes = EVENTS.reduce((types, name) => {\n    types[name] = PropTypes.func;\n    return types;\n}, {});\n\nclass ReactKotlinPlayground extends Component {\n    constructor(props, ...args) {\n        super(props, ...args);\n\n        this.code = createRef();\n\n        EVENTS.forEach((event) => {\n            if (!this[event]) this[event] = this.createProxy(event);\n        });\n        // this.handleChange = this.handleChange.bind(this);\n    }\n\n    createProxy(name) {\n        return (...args) => {\n            if (this.props[name]) this.props[name](...args);\n        };\n    }\n\n    handleChange(instance) {\n        console.log('instance: ', instance);\n        console.log('pokey: ', this);\n    }\n\n    initPlayground() {\n        const isInited =\n            this.code &&\n            this.code.current &&\n            this.code.current.getAttribute(\n                \"data-kotlin-playground-initialized\"\n            ) === \"true\";\n\n        if (!isInited && this.props.playground) {\n            const eventFunctions = EVENTS.reduce((events, name) => {\n                events[name] = this[name] || this.props[name];\n                return events;\n            }, {});\n            eventFunctions[\"onChange\"] = this.handleChange;\n \n            this.props.playground(this.code.current, eventFunctions);\n        }\n    }\n\n    componentDidMount() {\n        this.initPlayground();\n    }\n\n    componentDidUpdate() {\n        console.log('pokemons state has changed.');\n        this.initPlayground();\n  }\n\n    render() {\n        const {\n            className,\n            children,\n            //eslint-disable-next-line no-unused-vars\n            playground: _playground,\n            ...props\n        } = this.props;\n\n        const elementProps = Object.keys(props).reduce((result, name) => {\n            if (EVENTS.indexOf(name) === -1)\n                result[normalizeAttribute(name)] = props[name];\n            return result;\n        }, {});\n\n        return createElement(\n            \"div\",\n            { className },\n            createElement(\"code\", { ...elementProps, ref: this.code }, children)\n        );\n    }\n}\n\nfunction cloneProps(props) {\n    const clonedProps = { ...props };\n\n    Object.keys(props).forEach((name) => {\n        clonedProps[normalizeAttribute(name)] = props[name];\n    });\n\n    return clonedProps;\n}\n\n// ReactKotlinPlayground.propTypes = {\n//     className: PropTypes.string,\n//     children: PropTypes.node.required,\n//     playground: PropTypes.func.required,\n\n//     ...eventsPropTypes,\n\n//     ...cloneProps({\n//         version: PropTypes.string,\n//         args: PropTypes.oneOfType([\n//             PropTypes.string,\n//             PropTypes.arrayOf(PropTypes.string),\n//         ]),\n//         targetPlatform: PropTypes.oneOf([\"junit\", \"canvas\", \"js\", \"java\"]),\n//         highlightOnly: PropTypes.oneOf([\"nocursor\"]),\n//         jsLibs: PropTypes.string,\n//         autoIndent: PropTypes.bool,\n//         theme: PropTypes.string,\n//         mode: PropTypes.oneOf([\n//             \"kotlin\",\n//             \"js\",\n//             \"java\",\n//             \"groovy\",\n//             \"xml\",\n//             \"c\",\n//             \"shell\",\n//             \"swift\",\n//             \"obj-c\",\n//         ]),\n//         minCompilerVersion: PropTypes.string,\n//         autocomplete: PropTypes.bool,\n//         highlightOnFly: PropTypes.bool,\n//         indent: PropTypes.number,\n//         lines: PropTypes.bool,\n//         from: PropTypes.number,\n//         to: PropTypes.number,\n//         outputHeight: PropTypes.number,\n//         matchBrackets: PropTypes.bool,\n//     }),\n// };\n\nexport default ReactKotlinPlayground;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}